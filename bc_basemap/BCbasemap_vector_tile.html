<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
<style>
  html, body, #map {
      height: 100%;
      margin: 0;
      padding: 0;
  }
  .leaflet-mapbox-gl-layer {
      z-index: 1;
  }
</style>
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_4287d23e42a16a877939aaef00b2fff3 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
</head>
<body>
    
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.9.2/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.9.2/mapbox-gl.js"></script>
    <script src="https://unpkg.com/mapbox-gl-leaflet/leaflet-mapbox-gl.js"></script>
    
<div style="position: absolute; bottom: 10px; right: 10px; z-index: 9999;
            background: rgba(255, 255, 255, 0.8); padding: 5px; font-size: 10px;">
Tiles Â© <a target='_blank' href='https://catalogue.data.gov.bc.ca/dataset/78895ec6-c679-4837-a01a-8d65876a3da9'>
ESRI &amp; GeoBC</a>
</div>
    
            <div class="folium-map" id="map_4287d23e42a16a877939aaef00b2fff3" ></div>
        
</body>
<script>
    
    
            var map_4287d23e42a16a877939aaef00b2fff3 = L.map(
                "map_4287d23e42a16a877939aaef00b2fff3",
                {
                    center: [49.2827, -123.1207],
                    crs: L.CRS.EPSG3857,
                    zoom: 12,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            // Configure Mapbox GL layer with error handling
            var glLayer = L.mapboxGL({
                style: 'https://www.arcgis.com/sharing/rest/content/items/b1624fea73bd46c681fab55be53d96ae/resources/styles/root.json',
                accessToken: 'no-token-needed'
            }).addTo(map_4287d23e42a16a877939aaef00b2fff3);
            
            // Add error listeners
            glLayer.getGLMap().on('load', function() {
                console.log('Mapbox GL map loaded');
                debugLabelLayers();
            });
            
            glLayer.getGLMap().on('error', function(e) {
                console.error('Mapbox GL error:', e.error);
            });
            
            // Debug function to check label layers
            function debugLabelLayers() {
                var mapGL = glLayer.getGLMap();
                console.log('All layers:', mapGL.getStyle().layers);
                
                // Check for label layers
                var labelLayers = mapGL.getStyle().layers.filter(function(l) {
                    return l.type === 'symbol' && l.layout && l.layout['text-field'];
                });
                
                console.log('Label layers found:', labelLayers);
                if (labelLayers.length === 0) {
                    console.warn('No label layers found in style');
                }
            }
            
            // Optional: Add layer inspection control
            L.Control.LayerInspector = L.Control.extend({
                onAdd: function(map) {
                    var div = L.DomUtil.create('div', 'leaflet-control-layer-inspector');
                    div.innerHTML = '<button>Show Layers</button>';
                    div.firstChild.onclick = function() { debugLabelLayers(); };
                    return div;
                }
            });
            new L.Control.LayerInspector({ position: 'topright' }).addTo(map_4287d23e42a16a877939aaef00b2fff3);
            
</script>
</html>